Camera input:

-f video4linux2 -video_size 320x240 -vsync cfr -r 20 -i /dev/video0

File input:



Hybinar

-acodec libvo_aacenc -ab 96k -ar 48000 \
-vcodec libx264 -vb 512k -preset ultrafast -tune zerolatency -analyzeduration 0 -f flv \
"rtmp://hybinar.ru/live/egor"

var proc = ffmpeg(pathToMovie)
/* Output to Hybinar server */
.output('rtmp://hybinar.ru/live/egor')
.format('flv')
.audioCodec('libvo_aacenc')
.audioBitrate('64k')
.addOption('-ar', 48000)
.videoCodec('libx264')
.videoBitrate('512k')
.addOption('-preset', 'ultrafast')
.addOption('-tune', 'zerolatency')
.addOption('-analyzeduration', '0')
/* Output to Express stream */
.output(res, {end:true})
.format('webm')
.audioCodec('libvorbis')
.audioBitrate('64k')
.addOption('-ar', 48000)
.videoCodec('libvpx')
.videoBitrate('512k')
.addOption('-g', '52')
.addOption('-lag-in-frames', '1')
.addOption('-slices', '4')
.addOption('-cpu-used', '4')
.addOption('-deadline', 'realtime')
.addOption('-bufsize', '512')
.on('end', function() {console.log('file has been converted succesfully');})
.on('error', function(err) {console.log('an error happened: ' + err.message);})
.run();

Webm:

-acodec libvorbis -ab 64k -ar 48000 \
-vcodec libvpx -g 52 -vb 448k -lag-in-frames 1 -slices 4 -cpu-used 4 -deadline realtime -bufsize 512 -f webm \
"http://localhost:8080/publish/first?password=secret"


